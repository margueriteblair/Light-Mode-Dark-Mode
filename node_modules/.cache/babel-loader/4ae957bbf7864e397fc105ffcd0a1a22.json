{"ast":null,"code":"const {\n  default: axios\n} = require('axios');\n\nconst baseURL = 'http://localhost:3000';\nconst loginURL = `${baseURL}/user/login`;\nexport default class User {\n  static logOut() {\n    User.loggedIn = false;\n    User.user = '';\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n  }\n\n  static initialize() {\n    User.loggedIn = localStorage.getItem('token') != null;\n    User.user = User.loggedIn ? localStorage.getItem('user') : '';\n  }\n\n  static verifyLoggedIn(successEvent = () => {}, failedEvent = err => {}) {\n    const token = localStorage.getItem('token');\n    if (!token) return;\n    axios.put(loginURL, {\n      token: token\n    }).then(res => {\n      if (res.status === 200) {\n        User.loggedIn = true;\n        User.user = res.data.user;\n        localStorage.setItem(\"token\", res.data.token);\n        localStorage.setItem(\"user\", res.data.user);\n        successEvent();\n      } else {\n        failedEvent(res.response);\n        User.loggedIn = false;\n        User.user = '';\n        localStorage.removeItem(\"token\");\n        localStorage.removeItem(\"user\");\n      }\n    }).catch(err => {\n      failedEvent(err.response);\n      User.loggedIn = false;\n      User.user = '';\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"user\");\n    });\n  }\n\n}\nUser.loggedIn = false;\nUser.user = '';","map":{"version":3,"sources":["/Users/margueriteblair/Documents/CareerDevs11/javascript/101/2020-09/togglelightmode/src/utils/userLogin.js"],"names":["default","axios","require","baseURL","loginURL","User","logOut","loggedIn","user","localStorage","removeItem","initialize","getItem","verifyLoggedIn","successEvent","failedEvent","err","token","put","then","res","status","data","setItem","response","catch"],"mappings":"AAAA,MAAM;AAACA,EAAAA,OAAO,EAAEC;AAAV,IAAmBC,OAAO,CAAC,OAAD,CAAhC;;AACA,MAAMC,OAAO,GAAI,uBAAjB;AACA,MAAMC,QAAQ,GAAI,GAAED,OAAQ,aAA5B;AAEA,eAAe,MAAME,IAAN,CAAW;AACxB,SAAOC,MAAP,GAAgB;AACdD,IAAAA,IAAI,CAACE,QAAL,GAAgB,KAAhB;AACAF,IAAAA,IAAI,CAACG,IAAL,GAAY,EAAZ;AACAC,IAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAD,IAAAA,YAAY,CAACC,UAAb,CAAwB,MAAxB;AACD;;AAKD,SAAOC,UAAP,GAAoB;AAClBN,IAAAA,IAAI,CAACE,QAAL,GAAgBE,YAAY,CAACG,OAAb,CAAqB,OAArB,KAAiC,IAAjD;AACAP,IAAAA,IAAI,CAACG,IAAL,GAAYH,IAAI,CAACE,QAAL,GAAgBE,YAAY,CAACG,OAAb,CAAqB,MAArB,CAAhB,GAA+C,EAA3D;AACD;;AAED,SAAOC,cAAP,CAAsBC,YAAY,GAAG,MAAM,CAAE,CAA7C,EAA+CC,WAAW,GAAIC,GAAD,IAAS,CAAE,CAAxE,EAA0E;AACxE,UAAMC,KAAK,GAAGR,YAAY,CAACG,OAAb,CAAqB,OAArB,CAAd;AACA,QAAI,CAACK,KAAL,EAAY;AAEZhB,IAAAA,KAAK,CAACiB,GAAN,CAAUd,QAAV,EAAoB;AAAEa,MAAAA,KAAK,EAAEA;AAAT,KAApB,EACGE,IADH,CACQC,GAAG,IAAI;AACT,UAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtBhB,QAAAA,IAAI,CAACE,QAAL,GAAgB,IAAhB;AACAF,QAAAA,IAAI,CAACG,IAAL,GAAYY,GAAG,CAACE,IAAJ,CAASd,IAArB;AACAC,QAAAA,YAAY,CAACc,OAAb,CAAqB,OAArB,EAA8BH,GAAG,CAACE,IAAJ,CAASL,KAAvC;AACAR,QAAAA,YAAY,CAACc,OAAb,CAAqB,MAArB,EAA6BH,GAAG,CAACE,IAAJ,CAASd,IAAtC;AACAM,QAAAA,YAAY;AACb,OAND,MAMO;AACLC,QAAAA,WAAW,CAACK,GAAG,CAACI,QAAL,CAAX;AACAnB,QAAAA,IAAI,CAACE,QAAL,GAAgB,KAAhB;AACAF,QAAAA,IAAI,CAACG,IAAL,GAAY,EAAZ;AACAC,QAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAD,QAAAA,YAAY,CAACC,UAAb,CAAwB,MAAxB;AACD;AACJ,KAfH,EAgBGe,KAhBH,CAgBST,GAAG,IAAI;AACZD,MAAAA,WAAW,CAACC,GAAG,CAACQ,QAAL,CAAX;AACAnB,MAAAA,IAAI,CAACE,QAAL,GAAgB,KAAhB;AACAF,MAAAA,IAAI,CAACG,IAAL,GAAY,EAAZ;AACAC,MAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAD,MAAAA,YAAY,CAACC,UAAb,CAAwB,MAAxB;AACD,KAtBH;AAuBD;;AA3CuB;AAALL,I,CAQZE,Q,GAAW,K;AARCF,I,CASZG,I,GAAO,E","sourcesContent":["const {default: axios} = require('axios');\nconst baseURL  = 'http://localhost:3000';\nconst loginURL = `${baseURL}/user/login`\n\nexport default class User {\n  static logOut() {\n    User.loggedIn = false; \n    User.user = '';\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n  }\n\n  static loggedIn = false;\n  static user = ''\n\n  static initialize() {\n    User.loggedIn = localStorage.getItem('token') != null;\n    User.user = User.loggedIn ? localStorage.getItem('user') : '';\n  }\n\n  static verifyLoggedIn(successEvent = () => {}, failedEvent = (err) => {}) {\n    const token = localStorage.getItem('token');\n    if (!token) return;\n\n    axios.put(loginURL, { token: token })\n      .then(res => {\n          if (res.status === 200) {\n            User.loggedIn = true;\n            User.user = res.data.user;\n            localStorage.setItem(\"token\", res.data.token);\n            localStorage.setItem(\"user\", res.data.user);\n            successEvent();\n          } else {\n            failedEvent(res.response);\n            User.loggedIn = false; \n            User.user = '';\n            localStorage.removeItem(\"token\");\n            localStorage.removeItem(\"user\");\n          }\n      })\n      .catch(err => {\n        failedEvent(err.response);\n        User.loggedIn = false; \n        User.user = '';\n        localStorage.removeItem(\"token\");\n        localStorage.removeItem(\"user\");\n      });\n  }\n}"]},"metadata":{},"sourceType":"module"}